!function(){var e={a:[["ɑ","open back unrounded"],["ɐ","open-mid schwa"],["ɒ","open back rounded"],["æ","raised open front unrounded"]],b:[["ɓ","vd bilabial implosive"],["ʙ","vd bilabial trill"],["β","vd bilabial fricative"],["ᵝ","rounded coarticulation"],["ᵇ","labial coarticulation"]],c:[["ɔ","open-mid back rounded"],["ɕ","vl alveolopalatal fricative"],["ç","vl palatal fricative"]],d:[["ɗ","vd alveolar implosive"],["ɖ","vd retroflex plosive"],["ð","vd dental fricative"],["ʤ","vd postalveolar affricate"]],e:[["ə","schwa"],["ɘ","close-mid schwa"],["ɚ","rhotacized schwa"],["ɛ","open-mid front unrounded"],["ɜ","open-mid central"],["ɝ","rhotacized open-mid central"],["ɞ","open-mid central rounded"]],f:[["ɟ","vd palatal plosive"],["ʄ","vd palatal implosive"]],g:[["ɡ","vd velar plosive"],["ɠ","vd velar implosive"],["ɢ","vd uvular plosive"],["ʛ","vd uvular implosive"]],h:[["ɦ","vd glottal fricative"],["ɧ","vl multiple-place fricative"],["ħ","vl pharyngeal fricative"],["ɥ","labial-palatal approximant"],["ʜ","vl epiglottal fricative"],["ʰ","aspirated",!0],["ʱ","breathy-voice-aspirated",!0]],i:[["ɨ","close central unrounded"],["ɪ","lax close front unrounded"]],j:[["ʝ","vd palatal fricative"],["ʲ","palatalized",!0]],l:[["ɭ","vd retroflex lateral"],["ɬ","vl alveolar lateral fricative"],["ɫ","velarized vd alveolar lateral"],["ɮ","vd alveolar lateral fricative"],["ʟ","vd velar lateral"],["ʷ","labialized",!0]],m:[["ɱ","vd labiodental nasal"],["ɯ","close back unrounded"],["ɰ","velar approximant"],["ᵐ","nasal coarticulation",!0]],n:[["ŋ","vd velar nasal"],["ɳ","vd retroflex nasal"],["ɲ","vd palatal nasal"],["ɴ","vd uvular nasal"],["ⁿ","nasal coarticulation",!0],["ᵑ","nasal coarticulation",!0]],o:[["ø","front close-mid rounded"],["ɵ","rounded schwa"],["ɸ","vl bilabial fricative"],["θ","vl dental fricative"],["œ","front open-mid rounded"],["ɶ","front open rounded"],["ʘ","bilabial click"]],r:[["ɹ","vd (post)alveolar approximant"],["ɺ","vd alveolar lateral flap"],["ɾ","vd alveolar tap"],["ɻ","vd retroflex approximant"],["ʀ","vd uvular trill"],["ʁ","vd uvular fricative"],["ɽ","vd retroflex flap"],["ʴ","rhotacized",!0]],s:[["ʂ","vl retroflex fricative"],["ʃ","vl postalveolar fricative"]],t:[["ʈ","vl retroflex plosive"],["ʧ","vl postalveolar affricate"]],u:[["ʉ","close central rounded"],["ʊ","lax close back rounded"],["ʋ","vd labiodental approximant"]],v:[["ⱱ","voiced labiodental flap"],["ʌ","open-mid back unrounded"],["ɣ","vd velar fricative"],["ɤ","close-mid back unrounded"],["ˠ","velarized",!0]],w:[["ʍ","vl labial-velar fricative"],["ʷ","labialized",!0]],x:[["χ","vl uvular fricative"]],y:[["ʎ","vd palatal lateral"],["ʏ","lax close front rounded"]],z:[["ʑ","vd alveolopalatal fricative"],["ʐ","vd retroflex fricative"],["ʒ","vd postalveolar fricative"]],191:[["ʔ","glottal plosive"],["ʡ","vd epiglottal plosive"],["ʕ","vd pharyngeal fricative"],["ʢ","vd epiglottal fricative"],["ˤ","pharyngealized",!0],["ˀ","glottalized",!0]],192:[["˞","rhotacized",!0],["̃","nasalized",!0],["̴","velarized or pharyngealized",!0],["̰","creaky voiced",!0]],220:[["ǀ","dental click"],["ǁ","alveolar lateral click"],["ǂ","alveolar click"]],188:[["ˌ","secondary stress",!0]],186:[["ː","length mark",!0]],189:[["˞","rhotacized",!0],["̴","velarized or pharyngealized",!0],["͜","tie bar below",!0],["͡","tie bar above",!0],["̠","retracted",!0],["̪","dental",!0],["̺","apical",!0]],190:[["ˌ","secondary stress",!0],["̩","syllabic",!0],["̥","voiceless",!0],["̬","voiced",!0],["̤","breathy voiced",!0],["̟","advanced",!0],["̠","retracted",!0],["̰","creaky voiced",!0],["̪","dental",!0],["̺","apical",!0],["̼","linguolabial",!0],["̻","laminal",!0],["̹","more rounded",!0],["̜","less rounded",!0],["̝","raised",!0],["̞","lowered",!0],["̯","non-syllabic",!0],["̘","avanced tongue root",!0],["̙","retracted tongue root",!0],["͜","tie bar below",!0]],222:[["ˈ","primary stress",!0],["ˑ","half-length",!0],["ʼ","ejective",!0],["̊","voiceless",!0],["̚","not audibly released",!0],["̈","centralized",!0],["̽","mid-centralized",!0],["̆","extra-short",!0],["̋","extra high tone",!0],["́","high tone",!0],["̄","mid tone",!0],["̀","low tone",!0],["̏","extra low tone",!0],["↓","downstep"],["↑","upstep"],["↗","global rise"],["↘","global fall"],["͡","tie bar above",!0]]};$.fn.ipa_ime=function(){$(this).each(function(){var a=$(this),l=$('<div class="ime_suggest" />').insertAfter(a),t={selected:0,apply:function(e){var t;if(t=e?$("#ime_button_"+e).data("char"):$(".ime_selected").data("char")){var i=a.val(),r=0;if("selectionStart"in a[0])r=a[0].selectionStart;else if("selection"in document){a.focus();var o=document.selection.createRange(),n=document.selection.createRange().text.length;o.moveStart("character",-i.length),r=o.text.length-n}var d=i.slice(0,r-1)+t;if(i.length>r&&(d+=i.slice(r)),a.val(d),"setSelectionRange"in a[0])a.focus(),a[0].setSelectionRange(r,r);else if("createTextRange"in a[0]){var c=a[0].createTextRange();c.collapse(!0),c.moveEnd("character",r),c.moveStart("character",r),c.select()}return l.hide(),a.trigger("change"),!0}return!1},down:function(){var e=$(".ime_selected").next();e.length||(this.right(),e=$(".ime_selected_col button").first()),$(".ime_selected").removeClass("ime_selected"),e.addClass("ime_selected")},up:function(){var e=$(".ime_selected").prev();e.length||(this.left(),e=$(".ime_selected_col button").last()),$(".ime_selected").removeClass("ime_selected"),e.addClass("ime_selected")},left:function(){if($(".ime_button_list").length<=1)return!1;var e=$(".ime_selected_col").prev();return e.length||(e=$(".ime_button_list").last()),this.changeColumn(e),!0},right:function(){if($(".ime_button_list").length<=1)return!1;var e=$(".ime_selected_col").next();return e.length||(e=$(".ime_button_list").first()),this.changeColumn(e),!0},changeColumn:function(e){var a=parseInt($(".ime_selected").attr("id").slice(11));$(".ime_suggest button small").remove(),$(".ime_suggest button[id]").attr("id",""),$(".ime_selected").removeClass("ime_selected"),$(".ime_selected_col").removeClass("ime_selected_col");var l=1,t=e.children("button");t.each(function(){$(this).attr("id","ime_button_"+l).append("<small>"+l+"</small>"),(l===a||a>t.length&&l==t.length)&&$(this).addClass("ime_selected"),l++}),e.addClass("ime_selected_col")}};a.bind("keydown",function(a){if(!a.ctrlKey){var i=$(".ime_suggest:visible").length;switch(a.keyCode){case 13:if(i)return t.apply(),a.preventDefault(),void 0;break;case 37:if(i)return t.left(),a.preventDefault(),void 0;break;case 39:if(i)return t.right()||t.apply(),a.preventDefault(),void 0;break;case 38:if(i)return t.up(),a.preventDefault(),void 0;break;case 40:if(i)return t.down(),a.preventDefault(),void 0;break;case 49:case 50:case 51:case 52:case 53:case 54:$(".ime_suggest:visible").length&&!a.shiftKey&&t.apply(a.keyCode-48)&&a.preventDefault();break;case 186:case 191:case 192:case 220:if(!a.shiftKey)return}var r;if(null!=e[a.keyCode])r=e[a.keyCode];else{if(null==e[String.fromCharCode(a.keyCode).toLowerCase()])return l.hide(),void 0;r=e[String.fromCharCode(a.keyCode).toLowerCase()]}var o;l.html(""),r.forEach(function(e,a){var t=e[0];e[2]&&(t="◌"+t);var i=$('<button data-char="'+e[0]+'">'+t+"<em>"+e[1]+"</em></button>");if(0===a&&i.addClass("ime_selected"),a%6||(o&&l.append(o),o=$('<div class="ime_button_list" />'),6>a&&o.addClass("ime_selected_col")),6>a){var r=a+1;i.append("<small>"+r+"</small>").attr("id","ime_button_"+r)}o.append(i)}),l.append(o),l.show()}}),a.bind("click",function(){l.hide()}),a.bind("blur",function(){l.hide()}),l.bind("mouseover","button",function(e){"BUTTON"==e.target.nodeName&&($(".ime_selected").removeClass("ime_selected"),$(e.target).addClass("ime_selected"))}),l.bind("click","button",function(){t.apply()});var i=$(this).offset();l.css({top:i.top+$(this).height,left:i.left})})}}();